/**
 * Strixun Stream Suite - SCSS Mixins
 * 
 * Reusable style patterns
 * Framework-agnostic SCSS library
 */

@use 'sass:color';
@use 'variables' as *;
@use 'animations' as *;

// ============ Glass Effect (Retro - No Blur) ============
@mixin glass-effect($opacity: 0.95) {
  background: rgba(37, 32, 23, $opacity);
  border: 1px solid rgba(61, 54, 39, 0.8);
  // Removed backdrop-filter for performance - retro style doesn't need it
}

// ============ Card ============
@mixin card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

// ============ Button ============
@mixin button($variant: 'primary') {
  @if $variant == 'primary' {
    @include arcade-button(var(--accent), var(--accent-dark));
  } @else if $variant == 'secondary' {
    @include arcade-button(var(--border), var(--border-light));
    color: var(--text);
  } @else if $variant == 'danger' {
    @include arcade-button(var(--danger), color.scale(color('danger'), $lightness: -20%));
    color: #fff;
  } @else {
    // Default arcade style
    @include arcade-button(var(--accent), var(--accent-dark));
  }
}

// ============ Input ============
@mixin input {
  padding: 8px 12px;
  background: var(--bg-dark);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text);
  font-size: 14px;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
  
  &:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(237, 174, 73, 0.2);
  }
  
  &::placeholder {
    color: var(--muted);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

// ============ Scrollbar ============
@mixin scrollbar($width: 8px) {
  &::-webkit-scrollbar {
    width: $width;
    height: $width;
  }
  
  &::-webkit-scrollbar-track {
    background: transparent;
  }
  
  &::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
    
    &:hover {
      background: var(--muted);
    }
  }
  
  &::-webkit-scrollbar-corner {
    background: transparent;
  }
  
  // Firefox scrollbar
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

// ============ Flexbox Utilities ============
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

// ============ Grid Utilities ============
@mixin grid-auto($min-width: 200px, $gap: 12px) {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax($min-width, 1fr));
  gap: $gap;
}

// ============ Text Utilities ============
@mixin text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

@mixin text-truncate($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// ============ Animations ============
@mixin fade-in($duration: 0.3s) {
  animation: fade-in $duration ease-in;
}

@mixin slide-in($direction: 'up', $duration: 0.3s) {
  @if $direction == 'up' {
    animation: slide-up $duration ease-out;
  } @else if $direction == 'down' {
    animation: slide-down $duration ease-out;
  }
}

// ============ WIP (Work In Progress) State ============
// Styled to match warning toast with striped background
@mixin wip-state {
  position: relative;
  opacity: 0.7;
  cursor: not-allowed;
  pointer-events: none;
  border-color: #ff8c00;
  border-width: 2px;
  background: var(--card);
  background-image: repeating-linear-gradient(
    135deg,
    rgba(255, 140, 0, 0.1),
    rgba(255, 140, 0, 0.1) 4px,
    rgba(255, 140, 0, 0.15) 4px,
    rgba(255, 140, 0, 0.15) 8px
  );
  
  &:hover {
    opacity: 0.7;
    transform: none;
    background-image: repeating-linear-gradient(
      135deg,
      rgba(255, 140, 0, 0.1),
      rgba(255, 140, 0, 0.1) 4px,
      rgba(255, 140, 0, 0.15) 4px,
      rgba(255, 140, 0, 0.15) 8px
    );
  }
  
  &:active {
    transform: none;
  }
}

// WIP utility class for buttons and interactive elements
.wip {
  @include wip-state;
}

// ============ IN TESTING State ============
// Styled with info/blue color and unique diagonal pattern (opposite direction from warning)
// NOT disabled - still functional, just indicates testing status
@mixin in-testing-state {
  position: relative;
  border-color: var(--info);
  border-width: 2px;
  background: var(--card);
  background-image: repeating-linear-gradient(
    45deg,
    rgba(100, 149, 237, 0.08),
    rgba(100, 149, 237, 0.08) 6px,
    rgba(100, 149, 237, 0.12) 6px,
    rgba(100, 149, 237, 0.12) 12px
  );
  
  &:hover {
    border-color: var(--info);
    background-image: repeating-linear-gradient(
      45deg,
      rgba(100, 149, 237, 0.12),
      rgba(100, 149, 237, 0.12) 6px,
      rgba(100, 149, 237, 0.16) 6px,
      rgba(100, 149, 237, 0.16) 12px
    );
  }
}

// IN TESTING utility class for buttons and interactive elements
.in-testing {
  @include in-testing-state;
}

// ============ BETA State ============
// Functional but may have bugs or incomplete features
@mixin beta-state {
  position: relative;
  border-color: #9b59b6;
  border-width: 2px;
  background: var(--card);
  background-image: repeating-linear-gradient(
    90deg,
    rgba(155, 89, 182, 0.08),
    rgba(155, 89, 182, 0.08) 8px,
    rgba(155, 89, 182, 0.12) 8px,
    rgba(155, 89, 182, 0.12) 16px
  );
  
  &:hover {
    border-color: #9b59b6;
    background-image: repeating-linear-gradient(
      90deg,
      rgba(155, 89, 182, 0.12),
      rgba(155, 89, 182, 0.12) 8px,
      rgba(155, 89, 182, 0.16) 8px,
      rgba(155, 89, 182, 0.16) 16px
    );
  }
}

// BETA utility class
.beta {
  @include beta-state;
}

// ============ ALPHA State ============
// Early development, unstable, use with caution
@mixin alpha-state {
  position: relative;
  border-color: #e74c3c;
  border-width: 2px;
  background: var(--card);
  background-image: 
    repeating-linear-gradient(
      45deg,
      rgba(231, 76, 60, 0.08),
      rgba(231, 76, 60, 0.08) 6px,
      rgba(231, 76, 60, 0.12) 6px,
      rgba(231, 76, 60, 0.12) 12px
    ),
    repeating-linear-gradient(
      -45deg,
      rgba(231, 76, 60, 0.08),
      rgba(231, 76, 60, 0.08) 6px,
      rgba(231, 76, 60, 0.12) 6px,
      rgba(231, 76, 60, 0.12) 12px
    );
  
  &:hover {
    border-color: #e74c3c;
    background-image: 
      repeating-linear-gradient(
        45deg,
        rgba(231, 76, 60, 0.12),
        rgba(231, 76, 60, 0.12) 6px,
        rgba(231, 76, 60, 0.16) 6px,
        rgba(231, 76, 60, 0.16) 12px
      ),
      repeating-linear-gradient(
        -45deg,
        rgba(231, 76, 60, 0.12),
        rgba(231, 76, 60, 0.12) 6px,
        rgba(231, 76, 60, 0.16) 6px,
        rgba(231, 76, 60, 0.16) 12px
      );
  }
}

// ALPHA utility class
.alpha {
  @include alpha-state;
}

// ============ EXPERIMENTAL State ============
// New/unstable feature, may change or be removed
@mixin experimental-state {
  position: relative;
  border-color: #f39c12;
  border-width: 2px;
  background: var(--card);
  background-image: repeating-linear-gradient(
    0deg,
    rgba(243, 156, 18, 0.08),
    rgba(243, 156, 18, 0.08) 4px,
    rgba(243, 156, 18, 0.12) 4px,
    rgba(243, 156, 18, 0.12) 8px,
    rgba(243, 156, 18, 0.08) 8px,
    rgba(243, 156, 18, 0.08) 12px
  );
  
  &:hover {
    border-color: #f39c12;
    background-image: repeating-linear-gradient(
      0deg,
      rgba(243, 156, 18, 0.12),
      rgba(243, 156, 18, 0.12) 4px,
      rgba(243, 156, 18, 0.16) 4px,
      rgba(243, 156, 18, 0.16) 8px,
      rgba(243, 156, 18, 0.12) 8px,
      rgba(243, 156, 18, 0.12) 12px
    );
  }
}

// EXPERIMENTAL utility class
.experimental {
  @include experimental-state;
}

// ============ DEPRECATED State ============
// Being phased out, avoid using
@mixin deprecated-state {
  position: relative;
  opacity: 0.6;
  border-color: var(--muted);
  border-width: 2px;
  border-style: dashed;
  background: var(--card);
  background-image: repeating-linear-gradient(
    135deg,
    rgba(128, 128, 128, 0.05),
    rgba(128, 128, 128, 0.05) 8px,
    rgba(128, 128, 128, 0.1) 8px,
    rgba(128, 128, 128, 0.1) 16px
  );
  
  &:hover {
    opacity: 0.7;
    border-color: var(--muted);
  }
}

// DEPRECATED utility class
.deprecated {
  @include deprecated-state;
}

// ============ COMING SOON State ============
// Planned feature, not yet available
@mixin coming-soon-state {
  position: relative;
  opacity: 0.8;
  cursor: not-allowed;
  pointer-events: none;
  border-color: #1abc9c;
  border-width: 2px;
  background: var(--card);
  background-image: repeating-linear-gradient(
    0deg,
    rgba(26, 188, 156, 0.08),
    rgba(26, 188, 156, 0.08) 6px,
    rgba(26, 188, 156, 0.12) 6px,
    rgba(26, 188, 156, 0.12) 12px
  );
  
  &:hover {
    opacity: 0.8;
    transform: none;
  }
  
  &:active {
    transform: none;
  }
}

// COMING SOON utility class
.coming-soon {
  @include coming-soon-state;
}


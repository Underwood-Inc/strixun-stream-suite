# OTP Authentication Service - Cloudflare Worker Configuration
# Standalone multi-tenant OTP authentication service

name = "otp-auth-service"
main = "worker.js"
compatibility_date = "2024-01-01"

# KV Namespace for OTP auth data
# Created via: wrangler kv namespace create "OTP_AUTH_KV"
# Note: You'll need to create this namespace and update the ID below
[[kv_namespaces]]
binding = "OTP_AUTH_KV"
id = "your-kv-namespace-id-here"
# To create: cd serverless/otp-auth-service && wrangler kv namespace create "OTP_AUTH_KV"

# Environment variables (secrets should be set via wrangler secret put)
# DO NOT put actual secrets here - use wrangler CLI:
#   wrangler secret put JWT_SECRET
#   wrangler secret put RESEND_API_KEY
#   wrangler secret put RESEND_FROM_EMAIL
#   wrangler secret put ALLOWED_ORIGINS (optional, comma-separated)

[vars]
ENVIRONMENT = "production"

# Optional: Custom domain configuration
# 
# To use a custom domain, you have two options:
#
# Option 1: Configure routes in wrangler.toml (uncomment and update):
# routes = [
#   { pattern = "auth.yourdomain.com/*", zone_name = "yourdomain.com" }
# ]
#
# Option 2: Configure in Cloudflare Dashboard (recommended):
# 1. Go to Cloudflare Dashboard → Workers & Pages → otp-auth-service
# 2. Go to Settings → Triggers → Routes
# 3. Add custom domain route
# 4. Update DNS records as instructed by Cloudflare
#
# Note: Routes configured in the dashboard take precedence over wrangler.toml


# Strixun Stream Suite - Twitch API Proxy
# Cloudflare Worker Configuration

name = "strixun-twitch-api"
main = "worker.ts"
compatibility_date = "2024-01-01"

# KV Namespace for caching tokens and data
# Created via: wrangler kv namespace create "TWITCH_CACHE"
[[kv_namespaces]]
binding = "TWITCH_CACHE"
id = "66b9a4425cb7492fbae8f690780cd0ae"

# Environment variables (secrets should be set via wrangler secret put)
# DO NOT put actual secrets here - use wrangler CLI:
#   wrangler secret put TWITCH_CLIENT_ID
#   wrangler secret put TWITCH_CLIENT_SECRET

[vars]
ENVIRONMENT = "production"

# Custom domain configuration
# Using idling.app domain
routes = [
  { pattern = "api.idling.app/*", zone_name = "idling.app" }
]

# Alternative: Configure in Cloudflare Dashboard (recommended for production):
# 1. Go to Cloudflare Dashboard → Workers & Pages → strixun-twitch-api
# 2. Go to Settings → Triggers → Routes
# 3. Add custom domain route: api.idling.app/*
# 4. DNS records are automatically managed by Cloudflare
#
# Note: Routes configured in the dashboard take precedence over wrangler.toml